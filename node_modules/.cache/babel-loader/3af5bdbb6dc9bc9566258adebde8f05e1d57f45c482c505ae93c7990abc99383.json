{"ast":null,"code":"import React,{Component}from'react';import axios from'axios';import swal from'sweetalert2';import{withRouter}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class ImageUpload extends Component{constructor(props){super(props);this.state={requireImagePath:'',file:'',imagePreviewUrl:'',successMessage:'',errorMessage:''};this._handleImageChange=this._handleImageChange.bind(this);this._handleSubmit=this._handleSubmit.bind(this);}componentWillMount(){let getprofileImageAPI='http://localhost:8080/getprofileImage';let id=localStorage.getItem('id');if(id){var apiPayload={id:id};debugger;axios.post(getprofileImageAPI,apiPayload).then(res=>{debugger;console.log(res.data);if(res.data.errorMsg!=''){console.log('No Image Found');}else{this.setState({requireImagePath:res.data.data});}}).catch(err=>{console.error(err);});}}renderRows(){if(this.state.errorMessage!=''){return/*#__PURE__*/_jsx(\"p\",{class:\"text-danger\",children:this.state.errorMessage});}else if(this.state.successMessage!=''){return/*#__PURE__*/_jsx(\"p\",{class:\"alert alert-success\",children:this.state.errorMessage});}}_handleSubmit(e){e.preventDefault();// TODO: do something with -> this.state.file\nlet uploadAPI='http://localhost:8080/imageUpload';const formData=new FormData();formData.append('file',this.state.file);formData.append('id',localStorage.getItem('id'));const config={headers:{'content-type':'multipart/form-data'}};axios.post(uploadAPI,formData,config).then(function(res){if(res.data.errorMsg!=''){swal({type:'error',text:res.data.errorMsg});}else if(res.data.successMsg!=''){swal({type:'success',text:res.data.successMsg});}});}_handleImageChange(e){e.preventDefault();let reader=new FileReader();let file=e.target.files[0];if(file&&file.type=='image/png'){reader.onloadend=()=>{this.setState({file:file,imagePreviewUrl:reader.result});};reader.readAsDataURL(file);}else{swal({type:'error',title:'File Type',text:'Only PNG image types allowed'});}}renderImage(){let requireImagePath=this.state.requireImagePath;let imagePreviewUrl=this.state.imagePreviewUrl;if(imagePreviewUrl){return/*#__PURE__*/_jsx(\"img\",{alt:\"\",class:\"avatar img-circle\",src:this.state.imagePreviewUrl,width:\"200px\",height:\"200px\"});}else if(requireImagePath!=''){var abc=require('../images/'+requireImagePath);return/*#__PURE__*/_jsx(\"img\",{alt:\"\",class:\"avatar img-circle\",src:abc,width:\"200px\",height:\"200px\"});}else{return/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:\"http://www.investeqcapital.com/images/tlpteam/no-image.png\",class:\"avatar img-circle\",width:\"200px\",height:\"200px\"});}}render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this._handleSubmit,children:[this.renderImage(),/*#__PURE__*/_jsx(\"input\",{class:\"form-control mt-3\",type:\"file\",onChange:this._handleImageChange,required:\"\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h6\",{class:\"mt-2\",children:\"Upload a different photo...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-primary mt-2\",value:\"Upload Image\",onClick:this._handleSubmit,children:\"Upload Image\"})]})});}}export default withRouter(ImageUpload);","map":{"version":3,"names":["React","Component","axios","swal","withRouter","jsx","_jsx","jsxs","_jsxs","ImageUpload","constructor","props","state","requireImagePath","file","imagePreviewUrl","successMessage","errorMessage","_handleImageChange","bind","_handleSubmit","componentWillMount","getprofileImageAPI","id","localStorage","getItem","apiPayload","post","then","res","console","log","data","errorMsg","setState","catch","err","error","renderRows","class","children","e","preventDefault","uploadAPI","formData","FormData","append","config","headers","type","text","successMsg","reader","FileReader","target","files","onloadend","result","readAsDataURL","title","renderImage","alt","src","width","height","abc","require","render","onSubmit","onChange","required","value","onClick"],"sources":["C:/Users/revan/OneDrive/Documents/3rd Year/ODD SEM/Devops/FREELANCE_MARKET_PLACE/react-client - Copy/src/Components/Image.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport swal from 'sweetalert2'\nimport { withRouter } from 'react-router-dom'\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requireImagePath: '',\n      file: '',\n      imagePreviewUrl: '',\n      successMessage: '',\n      errorMessage: '',\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    let getprofileImageAPI = 'http://localhost:8080/getprofileImage';\n    let id = localStorage.getItem('id');\n    if (id) {\n      var apiPayload = {\n        id: id\n      }\n      debugger\n      axios.post(getprofileImageAPI, apiPayload)\n        .then(res => {\n          debugger\n          console.log(res.data);\n          if (res.data.errorMsg != '') {\n            console.log('No Image Found');\n          } else {\n            this.setState({\n              requireImagePath: res.data.data\n            });\n          }\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n  }\n  renderRows() {\n    if (this.state.errorMessage != '') {\n      return (\n        <p class=\"text-danger\" >{this.state.errorMessage}</p>\n      );\n    } else if (this.state.successMessage != '') {\n      return (\n        <p class=\"alert alert-success\" >{this.state.errorMessage}</p>\n      );\n    }\n  }\n  _handleSubmit(e) {\n    e.preventDefault();\n    // TODO: do something with -> this.state.file\n    let uploadAPI = 'http://localhost:8080/imageUpload';\n    const formData = new FormData();\n    formData.append('file', this.state.file);\n    formData.append('id', localStorage.getItem('id'));\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }\n    axios.post(uploadAPI, formData, config).then(function (res) {\n      if (res.data.errorMsg != '') {\n        swal({\n          type: 'error',\n          text: res.data.errorMsg,\n        })\n      } else if (res.data.successMsg != '') {\n        swal({\n          type: 'success',\n          text: res.data.successMsg,\n        })\n\n      }\n    });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    if(file && file.type == 'image/png'){\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      }\n      reader.readAsDataURL(file)  \n    }else{\n      swal({\n        type: 'error',\n        title: 'File Type',\n        text: 'Only PNG image types allowed',\n      })\n    }\n  }\n\n  renderImage() {\n    let requireImagePath = this.state.requireImagePath;\n    let imagePreviewUrl = this.state.imagePreviewUrl;\n    if (imagePreviewUrl) {\n      return <img alt=\"\" class=\"avatar img-circle\" src={this.state.imagePreviewUrl} width='200px' height='200px' />;\n    } else if (requireImagePath != '') {\n      var abc = require('../images/' +  requireImagePath);\n      return <img alt=\"\" class=\"avatar img-circle\" src={abc} width='200px' height='200px' />;\n    }\n    else {\n      return <img alt=\"\" src=\"http://www.investeqcapital.com/images/tlpteam/no-image.png\" class=\"avatar img-circle\" width='200px' height='200px' />\n    }\n\n  }\n  render() {\n\n\n    return (\n      <div>\n        <form onSubmit={this._handleSubmit}>\n          {this.renderImage()}\n          <input class='form-control mt-3' type=\"file\" onChange={this._handleImageChange} required='' /><br />\n          <h6 class='mt-2'>Upload a different photo...</h6>\n          <button type=\"submit\" class=\"btn btn-primary mt-2\" value=\"Upload Image\" onClick={this._handleSubmit}>Upload Image</button>\n        </form>\n      </div>\n    )\n  }\n\n}\n\nexport default withRouter(ImageUpload);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}