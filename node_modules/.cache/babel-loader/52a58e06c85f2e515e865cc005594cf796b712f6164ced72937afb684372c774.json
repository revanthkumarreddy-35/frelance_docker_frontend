{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\revan\\\\OneDrive\\\\Documents\\\\3rd Year\\\\ODD SEM\\\\Devops\\\\FREELANCE_MARKET_PLACE\\\\react-client\\\\src\\\\Components\\\\Image.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n// Remove `{ post }` import\nimport swal from 'sweetalert2';\nimport { withRouter } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requireImagePath: '',\n      file: '',\n      imagePreviewUrl: '',\n      successMessage: '',\n      errorMessage: ''\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n  }\n  componentWillMount() {\n    let getprofileImageAPI = 'http://localhost:8080/getprofileImage';\n    let id = localStorage.getItem('id');\n    if (id) {\n      var apiPayload = {\n        id: id\n      };\n      debugger;\n      axios.post(getprofileImageAPI, apiPayload).then(res => {\n        debugger;\n        console.log(res.data);\n        if (res.data.errorMsg != '') {\n          console.log('No Image Found');\n        } else {\n          this.setState({\n            requireImagePath: res.data.data\n          });\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  }\n  renderRows() {\n    if (this.state.errorMessage != '') {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"text-danger\",\n        children: this.state.errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this);\n    } else if (this.state.successMessage != '') {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        class: \"alert alert-success\",\n        children: this.state.errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this);\n    }\n  }\n  _handleSubmit(e) {\n    e.preventDefault();\n    // TODO: do something with -> this.state.file\n    let uploadAPI = 'http://localhost:8080/imageUpload';\n    const formData = new FormData();\n    formData.append('file', this.state.file);\n    formData.append('id', localStorage.getItem('id'));\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    post(uploadAPI, formData, config).then(function (res) {\n      if (res.data.errorMsg != '') {\n        swal({\n          type: 'error',\n          text: res.data.errorMsg\n        });\n      } else if (res.data.successMsg != '') {\n        swal({\n          type: 'success',\n          text: res.data.successMsg\n        });\n      }\n    });\n  }\n  _handleImageChange(e) {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n    if (file && file.type == 'image/png') {\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      };\n      reader.readAsDataURL(file);\n    } else {\n      swal({\n        type: 'error',\n        title: 'File Type',\n        text: 'Only PNG image types allowed'\n      });\n    }\n  }\n  renderImage() {\n    let requireImagePath = this.state.requireImagePath;\n    let imagePreviewUrl = this.state.imagePreviewUrl;\n    if (imagePreviewUrl) {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        class: \"avatar img-circle\",\n        src: this.state.imagePreviewUrl,\n        width: \"200px\",\n        height: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 14\n      }, this);\n    } else if (requireImagePath != '') {\n      var abc = require('../images/' + requireImagePath);\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        class: \"avatar img-circle\",\n        src: abc,\n        width: \"200px\",\n        height: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        src: \"http://www.investeqcapital.com/images/tlpteam/no-image.png\",\n        class: \"avatar img-circle\",\n        width: \"200px\",\n        height: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 14\n      }, this);\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this._handleSubmit,\n        children: [this.renderImage(), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"form-control mt-3\",\n          type: \"file\",\n          onChange: this._handleImageChange,\n          required: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 105\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          class: \"mt-2\",\n          children: \"Upload a different photo...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          class: \"btn btn-primary mt-2\",\n          value: \"Upload Image\",\n          onClick: this._handleSubmit,\n          children: \"Upload Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default _c = withRouter(ImageUpload);\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Component","axios","swal","withRouter","jsxDEV","_jsxDEV","ImageUpload","constructor","props","state","requireImagePath","file","imagePreviewUrl","successMessage","errorMessage","_handleImageChange","bind","_handleSubmit","componentWillMount","getprofileImageAPI","id","localStorage","getItem","apiPayload","post","then","res","console","log","data","errorMsg","setState","catch","err","error","renderRows","class","children","fileName","_jsxFileName","lineNumber","columnNumber","e","preventDefault","uploadAPI","formData","FormData","append","config","headers","type","text","successMsg","reader","FileReader","target","files","onloadend","result","readAsDataURL","title","renderImage","alt","src","width","height","abc","require","render","onSubmit","onChange","required","value","onClick","_c","$RefreshReg$"],"sources":["C:/Users/revan/OneDrive/Documents/3rd Year/ODD SEM/Devops/FREELANCE_MARKET_PLACE/react-client/src/Components/Image.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n// Remove `{ post }` import\nimport swal from 'sweetalert2'\nimport { withRouter } from 'react-router-dom'\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requireImagePath: '',\n      file: '',\n      imagePreviewUrl: '',\n      successMessage: '',\n      errorMessage: '',\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    let getprofileImageAPI = 'http://localhost:8080/getprofileImage';\n    let id = localStorage.getItem('id');\n    if (id) {\n      var apiPayload = {\n        id: id\n      }\n      debugger\n      axios.post(getprofileImageAPI, apiPayload)\n        .then(res => {\n          debugger\n          console.log(res.data);\n          if (res.data.errorMsg != '') {\n            console.log('No Image Found');\n          } else {\n            this.setState({\n              requireImagePath: res.data.data\n            });\n          }\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    }\n  }\n  renderRows() {\n    if (this.state.errorMessage != '') {\n      return (\n        <p class=\"text-danger\" >{this.state.errorMessage}</p>\n      );\n    } else if (this.state.successMessage != '') {\n      return (\n        <p class=\"alert alert-success\" >{this.state.errorMessage}</p>\n      );\n    }\n  }\n  _handleSubmit(e) {\n    e.preventDefault();\n    // TODO: do something with -> this.state.file\n    let uploadAPI = 'http://localhost:8080/imageUpload';\n    const formData = new FormData();\n    formData.append('file', this.state.file);\n    formData.append('id', localStorage.getItem('id'));\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }\n    post(uploadAPI, formData, config).then(function (res) {\n      if (res.data.errorMsg != '') {\n        swal({\n          type: 'error',\n          text: res.data.errorMsg,\n        })\n      } else if (res.data.successMsg != '') {\n        swal({\n          type: 'success',\n          text: res.data.successMsg,\n        })\n\n      }\n    });\n  }\n\n  _handleImageChange(e) {\n    e.preventDefault();\n\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    if(file && file.type == 'image/png'){\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      }\n      reader.readAsDataURL(file)  \n    }else{\n      swal({\n        type: 'error',\n        title: 'File Type',\n        text: 'Only PNG image types allowed',\n      })\n    }\n  }\n\n  renderImage() {\n    let requireImagePath = this.state.requireImagePath;\n    let imagePreviewUrl = this.state.imagePreviewUrl;\n    if (imagePreviewUrl) {\n      return <img alt=\"\" class=\"avatar img-circle\" src={this.state.imagePreviewUrl} width='200px' height='200px' />;\n    } else if (requireImagePath != '') {\n      var abc = require('../images/' +  requireImagePath);\n      return <img alt=\"\" class=\"avatar img-circle\" src={abc} width='200px' height='200px' />;\n    }\n    else {\n      return <img alt=\"\" src=\"http://www.investeqcapital.com/images/tlpteam/no-image.png\" class=\"avatar img-circle\" width='200px' height='200px' />\n    }\n\n  }\n  render() {\n\n\n    return (\n      <div>\n        <form onSubmit={this._handleSubmit}>\n          {this.renderImage()}\n          <input class='form-control mt-3' type=\"file\" onChange={this._handleImageChange} required='' /><br />\n          <h6 class='mt-2'>Upload a different photo...</h6>\n          <button type=\"submit\" class=\"btn btn-primary mt-2\" value=\"Upload Image\" onClick={this._handleSubmit}>Upload Image</button>\n        </form>\n      </div>\n    )\n  }\n\n}\n\nexport default withRouter(ImageUpload);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}