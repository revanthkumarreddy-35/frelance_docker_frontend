{"ast":null,"code":"import React,{Component}from'react';import{withRouter}from'react-router-dom';import axios from'axios';import swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class BidProjectForm extends Component{constructor(props){super(props);this.handleUserInput=e=>{const name=e.target.name;const value=e.target.value;this.setState({[name]:value});};this.state={id:0,amount:'',period:'',update:false};}componentWillMount(){let projectId=localStorage.getItem('currentProjectId');let userId=localStorage.getItem('id');let checkBidAPI='http://localhost:8080/getProjectBids/'+projectId;var apiPayload={userId:userId,projectId:projectId};axios.post(checkBidAPI,apiPayload).then(res=>{if(res.data.errorMsg!=''){this.setState({errorMessage:res.data.errorMsg});}else{let bids=res.data.data;bids.forEach(element=>{if(element.userId==userId){this.setState({id:element.id,amount:element.bid_amount,period:element.bid_period});}});}}).catch(err=>{console.error(err);});}handleSubmit(e){e.preventDefault();debugger;let postBidAPI='http://localhost:8080/postBid';let id=this.state.id?this.state.id:0;let period=this.state.period;let amount=this.state.amount;let projectId=localStorage.getItem('currentProjectId');let userId=localStorage.getItem('id');if(!period||!amount){return;}if(!projectId||!userId){console.log('Project/Employee ID not found');return;}var apiPayload;if(id==0){apiPayload={userId:userId,projectId:projectId,bid_period:period,bid_amount:amount};}else{apiPayload={id:id,userId:userId,projectId:projectId,bid_period:period,bid_amount:amount};}axios.post(postBidAPI,apiPayload).then(res=>{if(res.data.errorMsg!=''){this.setState({errorMessage:res.data.errorMsg});}else{this.setState({errorMessage:''});swal({type:'success',title:'Post Bid',text:res.data.successMsg});setTimeout(function(){window.location.href='http://localhost:3000/projectitem';},5000);}}).catch(err=>{console.error(err);});}renderRows(){if(this.state.errorMessage!=''){return/*#__PURE__*/_jsx(\"p\",{class:\"text-danger\",children:this.state.errorMessage});}}render(){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center divclasscenter\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-signup\",method:\"POST\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 font-weight-normal\",children:\"Enter Bid Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"panel panel-default\",children:this.renderRows()}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",className:\"form-control\",placeholder:\"Amount in $\",required:\"\",autoFocus:\"\",value:this.state.amount,onChange:this.handleUserInput}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"period\",className:\"form-control\",placeholder:\"Period in days\",value:this.state.period,onChange:this.handleUserInput,required:\"\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-lg btn-success\",type:\"submit\",onClick:this.handleSubmit.bind(this),children:\"Submit Bid\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\"})]})});}}export default withRouter(BidProjectForm);","map":{"version":3,"names":["React","Component","withRouter","axios","swal","jsx","_jsx","jsxs","_jsxs","BidProjectForm","constructor","props","handleUserInput","e","name","target","value","setState","state","id","amount","period","update","componentWillMount","projectId","localStorage","getItem","userId","checkBidAPI","apiPayload","post","then","res","data","errorMsg","errorMessage","bids","forEach","element","bid_amount","bid_period","catch","err","console","error","handleSubmit","preventDefault","postBidAPI","log","type","title","text","successMsg","setTimeout","window","location","href","renderRows","class","children","render","className","method","placeholder","required","autoFocus","onChange","onClick","bind"],"sources":["C:/Users/revan/OneDrive/Documents/3rd Year/ODD SEM/Devops/FREELANCE_MARKET_PLACE/react-client - Copy/src/Components/BidProjectForm.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'\nimport axios from 'axios';\nimport swal from 'sweetalert2'\n\nclass BidProjectForm extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            id:0,\n            amount: '',\n            period: '',\n            update:false\n\n        }\n    }\n    componentWillMount(){\n        let projectId = localStorage.getItem('currentProjectId');\n        let userId = localStorage.getItem('id');\n        let checkBidAPI = 'http://localhost:8080/getProjectBids/'+projectId;\n\n        var apiPayload = {userId: userId, projectId: projectId};\n        axios.post(checkBidAPI, apiPayload)\n            .then(res => {\n                if (res.data.errorMsg != '') {\n                    this.setState({\n                        errorMessage: res.data.errorMsg\n                    });\n                } else {\n                    let bids = res.data.data;\n                    bids.forEach(element => {\n                        if(element.userId==userId){\n                            this.setState({\n                                id:element.id,\n                                amount: element.bid_amount,\n                                period: element.bid_period \n                            });\n                        }                            \n                    });\n                }\n            })\n            .catch(err => {\n                console.error(err);\n            });\n    }\n\n    handleUserInput = (e) => {\n        const name = e.target.name;\n        const value = e.target.value;\n        this.setState({ [name]: value });\n    }\n    handleSubmit(e) {\n        e.preventDefault();\n        debugger\n        let postBidAPI = 'http://localhost:8080/postBid';\n        let id = this.state.id?this.state.id:0;\n        let period = this.state.period;\n        let amount = this.state.amount;\n        let projectId = localStorage.getItem('currentProjectId');\n        let userId = localStorage.getItem('id');\n        if (!period || !amount) {\n            return;\n        }\n        if (!projectId || !userId) {\n            console.log('Project/Employee ID not found');\n            return;\n        }\n        var apiPayload;\n        if(id==0){\n            apiPayload = {userId: userId, projectId: projectId, bid_period: period, bid_amount: amount };\n        }else{\n            apiPayload = { id:id,userId: userId, projectId: projectId, bid_period: period, bid_amount: amount };\n        }\n        \n        \n        axios.post(postBidAPI, apiPayload)\n            .then(res => {\n                if (res.data.errorMsg != '') {\n                    this.setState({\n                        errorMessage: res.data.errorMsg\n                    });\n                } else {\n                    this.setState({\n                        errorMessage: ''\n                    });\n                    swal({\n                        type: 'success',\n                        title: 'Post Bid',\n                        text: res.data.successMsg,\n                      })\n                      setTimeout(function () {\n                        window.location.href='http://localhost:3000/projectitem'\n                    }, 5000);\n                      \n                }\n            })\n            .catch(err => {\n                console.error(err);\n            });\n    }\n    renderRows() {\n        if (this.state.errorMessage != '') {\n            return (\n                <p class=\"text-danger\" >{this.state.errorMessage}</p>\n            );\n        }\n    }\n    render() {\n        return (\n            <div className=\"text-center divclasscenter\"  >\n                <form className=\"form-signup\" method=\"POST\">\n                    <h1 className=\"h3 mb-3 font-weight-normal\">Enter Bid Details</h1>\n                    <div className=\"panel panel-default\">\n                        {this.renderRows()}\n                    </div>\n                    <input type=\"number\" name='amount' className=\"form-control\" placeholder=\"Amount in $\"\n                        required=\"\" autoFocus=\"\" value={this.state.amount} onChange={this.handleUserInput} /><br />\n                    <input type=\"number\" name='period' className=\"form-control\" placeholder=\"Period in days\"\n                        value={this.state.period} onChange={this.handleUserInput} required=\"\" /><br />\n                    <button className=\"btn btn-lg btn-success\" type=\"submit\"\n                        onClick={this.handleSubmit.bind(this)} >Submit Bid</button>\n                    <div className=\"modal-footer\">\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\nexport default withRouter(BidProjectForm);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}